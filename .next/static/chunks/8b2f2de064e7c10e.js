(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71404,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(18566);function a(){(0,r.useRouter)();let[e,a]=(0,t.useState)([]),[l,i]=(0,t.useState)({studentName:"",phone:"",email:"",courseId:"",notes:""}),[n,d]=(0,t.useState)(!0),[o,c]=(0,t.useState)(!1),[m,u]=(0,t.useState)(""),[h,v]=(0,t.useState)(!1);(0,t.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await fetch("/api/courses");if(e.ok){let s=await e.json();a(s.courses)}}catch(e){console.error("Failed to fetch courses:",e)}finally{d(!1)}},g=async e=>{e.preventDefault(),u(""),c(!0);try{let e=await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to add lead");v(!0),i({studentName:"",phone:"",email:"",courseId:"",notes:""}),setTimeout(()=>{v(!1)},3e3)}catch(e){u(e instanceof Error?e.message:"Failed to add lead")}finally{c(!1)}},p=e.find(e=>e.id===l.courseId),j=p?p.fee*p.commissionPercent/100:0;return n?(0,s.jsx)("div",{className:"flex-center",style:{padding:"4rem"},children:(0,s.jsx)("div",{className:"spinner"})}):(0,s.jsxs)("div",{className:"fade-in",children:[(0,s.jsxs)("div",{className:"page-header",children:[(0,s.jsx)("h1",{className:"page-title",children:"Add New Lead"}),(0,s.jsx)("p",{className:"page-subtitle",children:"Manually add a lead to your collection"})]}),(0,s.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"2fr 1fr",gap:"var(--spacing-xl)"},children:[(0,s.jsxs)("div",{className:"card",children:[h&&(0,s.jsx)("div",{className:"alert alert-success",children:"âœ… Lead added successfully!"}),m&&(0,s.jsx)("div",{className:"alert alert-error",children:m}),(0,s.jsxs)("form",{onSubmit:g,children:[(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"studentName",children:"Student Name *"}),(0,s.jsx)("input",{id:"studentName",type:"text",placeholder:"Enter student's full name",value:l.studentName,onChange:e=>i({...l,studentName:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"phone",children:"Phone Number *"}),(0,s.jsx)("input",{id:"phone",type:"tel",placeholder:"+91 9876543210",value:l.phone,onChange:e=>i({...l,phone:e.target.value}),required:!0})]})]}),(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,s.jsx)("input",{id:"email",type:"email",placeholder:"student@example.com",value:l.email,onChange:e=>i({...l,email:e.target.value})})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"courseId",children:"Select Course *"}),(0,s.jsxs)("select",{id:"courseId",value:l.courseId,onChange:e=>i({...l,courseId:e.target.value}),required:!0,children:[(0,s.jsx)("option",{value:"",children:"Choose a course"}),e.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.center?.name,") - â‚¹",e.fee.toLocaleString()]},e.id))]})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"notes",children:"Notes (Optional)"}),(0,s.jsx)("textarea",{id:"notes",placeholder:"Any additional notes about this lead...",value:l.notes,onChange:e=>i({...l,notes:e.target.value}),rows:3})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",style:{marginTop:"var(--spacing-md)"},disabled:o,children:o?"Adding Lead...":"âž• Add Lead"})]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"card",style:{position:"sticky",top:"100px"},children:[(0,s.jsx)("h3",{style:{marginBottom:"var(--spacing-lg)"},children:"Commission Preview"}),p?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{marginBottom:"var(--spacing-lg)"},children:[(0,s.jsx)("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Selected Course"}),(0,s.jsx)("div",{style:{fontWeight:600},children:p.name})]}),(0,s.jsxs)("div",{style:{marginBottom:"var(--spacing-lg)"},children:[(0,s.jsx)("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Lead Goes To Center"}),(0,s.jsxs)("div",{style:{fontWeight:600,color:"var(--primary-light)",display:"flex",alignItems:"center",gap:"0.5rem"},children:["ðŸ¢ ",p.center?.name||"N/A"]})]}),(0,s.jsxs)("div",{style:{marginBottom:"var(--spacing-lg)"},children:[(0,s.jsx)("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Course Fee"}),(0,s.jsxs)("div",{style:{fontWeight:600},children:["â‚¹",p.fee.toLocaleString()]})]}),(0,s.jsxs)("div",{style:{marginBottom:"var(--spacing-lg)"},children:[(0,s.jsx)("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Commission Rate"}),(0,s.jsxs)("div",{style:{fontWeight:600},children:[p.commissionPercent,"%"]})]}),(0,s.jsxs)("div",{style:{padding:"var(--spacing-lg)",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(16, 185, 129, 0.1) 100%)",borderRadius:"var(--radius-md)",textAlign:"center"},children:[(0,s.jsx)("div",{style:{fontSize:"0.875rem",color:"var(--secondary)"},children:"You'll Earn"}),(0,s.jsxs)("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--secondary)"},children:["â‚¹",j.toLocaleString()]}),(0,s.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"on successful enrollment"})]})]}):(0,s.jsx)("div",{style:{textAlign:"center",color:"var(--text-muted)"},children:(0,s.jsx)("p",{children:"Select a course to see your commission"})})]})})]})]})}e.s(["default",()=>a])}]);