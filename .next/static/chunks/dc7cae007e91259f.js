(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5378,e=>{"use strict";var s=e.i(43476),t=e.i(71645);let a=["NEW","CONTACTED","INTERESTED","ENROLLED","CLOSED","LOST"];function l(){let[e,l]=(0,t.useState)([]),[i,d]=(0,t.useState)(!0),[n,r]=(0,t.useState)("ALL");(0,t.useEffect)(()=>{c()},[]);let c=async()=>{try{let e=await fetch("/api/leads");if(e.ok){let s=await e.json();l(s.leads)}}catch(e){console.error("Failed to fetch leads:",e)}finally{d(!1)}},h="ALL"===n?e:e.filter(e=>e.status===n);return i?(0,s.jsx)("div",{className:"flex-center",style:{padding:"4rem"},children:(0,s.jsx)("div",{className:"spinner"})}):(0,s.jsxs)("div",{className:"fade-in",children:[(0,s.jsxs)("div",{className:"page-header",children:[(0,s.jsx)("h1",{className:"page-title",children:"All Leads"}),(0,s.jsx)("p",{className:"page-subtitle",children:"Complete overview of all leads in the system"})]}),(0,s.jsxs)("div",{className:"grid grid-4",style:{marginBottom:"var(--spacing-xl)"},children:[(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("div",{className:"stat-value",children:e.length}),(0,s.jsx)("div",{className:"stat-label",children:"Total Leads"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("div",{className:"stat-value",style:{color:"var(--primary-light)"},children:e.filter(e=>"NEW"===e.status).length}),(0,s.jsx)("div",{className:"stat-label",children:"New"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("div",{className:"stat-value",style:{color:"var(--secondary)"},children:e.filter(e=>["ENROLLED","CLOSED"].includes(e.status)).length}),(0,s.jsx)("div",{className:"stat-label",children:"Converted"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsxs)("div",{className:"stat-value",children:[e.length>0?(e.filter(e=>["ENROLLED","CLOSED"].includes(e.status)).length/e.length*100).toFixed(1):0,"%"]}),(0,s.jsx)("div",{className:"stat-label",children:"Conversion Rate"})]})]}),(0,s.jsxs)("div",{className:"flex gap-sm",style:{marginBottom:"var(--spacing-xl)",flexWrap:"wrap"},children:[(0,s.jsxs)("button",{className:`btn btn-sm ${"ALL"===n?"btn-primary":"btn-secondary"}`,onClick:()=>r("ALL"),children:["All (",e.length,")"]}),a.map(t=>(0,s.jsxs)("button",{className:`btn btn-sm ${n===t?"btn-primary":"btn-secondary"}`,onClick:()=>r(t),children:[t," (",e.filter(e=>e.status===t).length,")"]},t))]}),(0,s.jsx)("div",{className:"card",children:0===h.length?(0,s.jsxs)("div",{className:"empty-state",children:[(0,s.jsx)("div",{className:"empty-state-icon",children:"ðŸ“‹"}),(0,s.jsx)("p",{children:"No leads found"})]}):(0,s.jsx)("div",{className:"table-container",children:(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Student"}),(0,s.jsx)("th",{children:"Contact"}),(0,s.jsx)("th",{children:"Course"}),(0,s.jsx)("th",{children:"Agent"}),(0,s.jsx)("th",{children:"Center"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Date"})]})}),(0,s.jsx)("tbody",{children:h.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{style:{fontWeight:500},children:e.studentName}),(0,s.jsxs)("td",{children:[(0,s.jsx)("div",{children:e.phone}),e.email&&(0,s.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:e.email})]}),(0,s.jsxs)("td",{children:[(0,s.jsx)("div",{children:e.course?.name||"N/A"}),(0,s.jsxs)("div",{style:{fontSize:"0.75rem",color:"var(--secondary)"},children:["â‚¹",e.course?.fee?.toLocaleString()||"N/A"]})]}),(0,s.jsx)("td",{children:e.agent?.name||"N/A"}),(0,s.jsx)("td",{children:e.center?.name||"N/A"}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:`badge badge-${e.status.toLowerCase()}`,children:e.status})}),(0,s.jsx)("td",{style:{color:"var(--text-muted)"},children:new Date(e.createdAt).toLocaleDateString()})]},e.id))})]})})})]})}e.s(["default",()=>l])}]);