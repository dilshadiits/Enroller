(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1384,e=>{"use strict";var s=e.i(43476),t=e.i(71645);function a(){let[e,a]=(0,t.useState)([]),[l,i]=(0,t.useState)(!0),[r,n]=(0,t.useState)(null),[d,c]=(0,t.useState)("ALL");(0,t.useEffect)(()=>{o()},[]);let o=async()=>{try{let e=await fetch("/api/payouts");if(e.ok){let s=await e.json();a(s.payouts)}}catch(e){console.error("Failed to fetch payouts:",e)}finally{i(!1)}},h=async(e,s)=>{n(e);try{let t=await fetch(`/api/payouts/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:s})});if(t.ok)o();else{let e=await t.json();alert(e.error||"Failed to process payout")}}catch(e){alert("Failed to process payout")}finally{n(null)}},m="ALL"===d?e:e.filter(e=>e.status===d),u={requested:e.filter(e=>"REQUESTED"===e.status).reduce((e,s)=>e+s.totalAmount,0),approved:e.filter(e=>"APPROVED"===e.status).reduce((e,s)=>e+s.totalAmount,0),paid:e.filter(e=>"PAID"===e.status).reduce((e,s)=>e+s.totalAmount,0)};return l?(0,s.jsx)("div",{className:"flex-center",style:{padding:"4rem"},children:(0,s.jsx)("div",{className:"spinner"})}):(0,s.jsxs)("div",{className:"fade-in",children:[(0,s.jsxs)("div",{className:"page-header",children:[(0,s.jsx)("h1",{className:"page-title",children:"Payout Management"}),(0,s.jsx)("p",{className:"page-subtitle",children:"Review and process agent payout requests"})]}),(0,s.jsxs)("div",{className:"grid grid-4",style:{marginBottom:"var(--spacing-xl)"},children:[(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("div",{className:"stat-value",children:e.length}),(0,s.jsx)("div",{className:"stat-label",children:"Total Requests"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsxs)("div",{className:"stat-value",style:{color:"var(--accent)"},children:["â‚¹",u.requested.toLocaleString()]}),(0,s.jsx)("div",{className:"stat-label",children:"Pending Review"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsxs)("div",{className:"stat-value",style:{color:"var(--primary-light)"},children:["â‚¹",u.approved.toLocaleString()]}),(0,s.jsx)("div",{className:"stat-label",children:"Approved (Unpaid)"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsxs)("div",{className:"stat-value",style:{color:"var(--secondary)"},children:["â‚¹",u.paid.toLocaleString()]}),(0,s.jsx)("div",{className:"stat-label",children:"Total Paid"})]})]}),(0,s.jsx)("div",{className:"flex gap-sm",style:{marginBottom:"var(--spacing-xl)"},children:["ALL","REQUESTED","APPROVED","PAID","REJECTED"].map(t=>(0,s.jsxs)("button",{className:`btn btn-sm ${d===t?"btn-primary":"btn-secondary"}`,onClick:()=>c(t),children:[t," (",e.filter(e=>"ALL"===t||e.status===t).length,")"]},t))}),(0,s.jsx)("div",{className:"card",children:0===m.length?(0,s.jsxs)("div",{className:"empty-state",children:[(0,s.jsx)("div",{className:"empty-state-icon",children:"ðŸ’³"}),(0,s.jsxs)("p",{children:["No payout requests ","ALL"!==d?`with status "${d}"`:""]})]}):(0,s.jsx)("div",{className:"table-container",children:(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Agent"}),(0,s.jsx)("th",{children:"Amount"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Requested"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:m.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[(0,s.jsx)("div",{style:{fontWeight:500},children:e.agent?.name||"Unknown"}),(0,s.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:e.agent?.email})]}),(0,s.jsxs)("td",{style:{fontWeight:600,color:"var(--secondary)",fontSize:"1.125rem"},children:["â‚¹",e.totalAmount.toLocaleString()]}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:`badge badge-${e.status.toLowerCase()}`,children:e.status})}),(0,s.jsx)("td",{style:{color:"var(--text-muted)"},children:new Date(e.requestedAt).toLocaleDateString()}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex gap-sm",children:["REQUESTED"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>h(e.id,"APPROVE"),className:"btn btn-success btn-sm",disabled:r===e.id,children:"Approve"}),(0,s.jsx)("button",{onClick:()=>h(e.id,"REJECT"),className:"btn btn-danger btn-sm",disabled:r===e.id,children:"Reject"})]}),"APPROVED"===e.status&&(0,s.jsx)("button",{onClick:()=>h(e.id,"MARK_PAID"),className:"btn btn-primary btn-sm",disabled:r===e.id,children:"Mark as Paid"}),"PAID"===e.status&&(0,s.jsx)("span",{style:{color:"var(--secondary)",fontSize:"0.875rem"},children:"âœ“ Completed"}),"REJECTED"===e.status&&(0,s.jsx)("span",{style:{color:"var(--danger)",fontSize:"0.875rem"},children:"âœ— Rejected"})]})})]},e.id))})]})})})]})}e.s(["default",()=>a])}]);