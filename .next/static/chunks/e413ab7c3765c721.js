(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50365,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(22016);function l(){let[e,l]=(0,a.useState)([]),[i,r]=(0,a.useState)({total:0,pending:0,paid:0}),[c,d]=(0,a.useState)(!0),[n,o]=(0,a.useState)(""),[h,m]=(0,a.useState)("");(0,a.useEffect)(()=>{m(window.location.origin),x()},[]);let x=async()=>{try{let[e,s,a]=await Promise.all([fetch("/api/leads"),fetch("/api/commissions"),fetch("/api/auth/me")]);if(e.ok){let s=await e.json();l(s.leads)}if(s.ok){let e=await s.json();r(e.totals)}if(a.ok){let e=await a.json();o(e.user.id)}}catch(e){console.error("Failed to fetch data:",e)}finally{d(!1)}},j=s=>e.filter(e=>e.status===s).length;return c?(0,s.jsx)("div",{className:"flex-center",style:{padding:"4rem"},children:(0,s.jsx)("div",{className:"spinner"})}):(0,s.jsxs)("div",{className:"fade-in",children:[(0,s.jsxs)("div",{className:"page-header",children:[(0,s.jsx)("h1",{className:"page-title",children:"Agent Dashboard"}),(0,s.jsx)("p",{className:"page-subtitle",children:"Track your leads and earnings"})]}),(0,s.jsx)("div",{className:"card",style:{marginBottom:"var(--spacing-xl)",borderLeft:"3px solid var(--primary)"},children:(0,s.jsxs)("div",{className:"flex-between",style:{flexWrap:"wrap",gap:"var(--spacing-md)"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{style:{marginBottom:"var(--spacing-sm)"},children:"Your Referral Link"}),(0,s.jsx)("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Share this link to collect leads"})]}),(0,s.jsxs)("div",{className:"url-input-group",children:[(0,s.jsx)("input",{type:"text",value:n&&h?`${h}/collect/${n}`:"",readOnly:!0,style:{maxWidth:"400px"}}),(0,s.jsx)("button",{onClick:()=>{let e=`${window.location.origin}/collect/${n}`;navigator.clipboard.writeText(e),alert("Link copied to clipboard!")},className:"btn btn-primary btn-sm",children:"ðŸ“‹ Copy"})]})]})}),(0,s.jsxs)("div",{className:"grid grid-4",style:{marginBottom:"var(--spacing-xl)"},children:[(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("div",{className:"stat-value",children:e.length}),(0,s.jsx)("div",{className:"stat-label",children:"Total Leads"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("div",{className:"stat-value",style:{color:"var(--primary-light)"},children:j("NEW")+j("CONTACTED")+j("INTERESTED")}),(0,s.jsx)("div",{className:"stat-label",children:"Active Leads"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("div",{className:"stat-value",style:{color:"var(--secondary)"},children:j("ENROLLED")+j("CLOSED")}),(0,s.jsx)("div",{className:"stat-label",children:"Conversions"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsxs)("div",{className:"stat-value",children:["â‚¹",i.total.toLocaleString()]}),(0,s.jsx)("div",{className:"stat-label",children:"Total Earnings"})]})]}),(0,s.jsxs)("div",{className:"grid grid-3",style:{marginBottom:"var(--spacing-xl)"},children:[(0,s.jsxs)("div",{className:"card",style:{borderTop:"3px solid var(--accent)"},children:[(0,s.jsx)("h4",{style:{color:"var(--accent)",marginBottom:"var(--spacing-sm)"},children:"Pending"}),(0,s.jsxs)("div",{className:"commission-amount",children:["â‚¹",i.pending.toLocaleString()]}),(0,s.jsx)("p",{style:{fontSize:"0.875rem",marginTop:"var(--spacing-sm)"},children:"Awaiting payout"})]}),(0,s.jsxs)("div",{className:"card",style:{borderTop:"3px solid var(--secondary)"},children:[(0,s.jsx)("h4",{style:{color:"var(--secondary)",marginBottom:"var(--spacing-sm)"},children:"Paid"}),(0,s.jsxs)("div",{className:"commission-amount",style:{color:"var(--secondary)"},children:["â‚¹",i.paid.toLocaleString()]}),(0,s.jsx)("p",{style:{fontSize:"0.875rem",marginTop:"var(--spacing-sm)"},children:"Successfully withdrawn"})]}),(0,s.jsx)("div",{className:"card",style:{borderTop:"3px solid var(--primary)"},children:(0,s.jsx)(t.default,{href:"/agent/commissions",className:"btn btn-primary",style:{width:"100%"},children:"ðŸ’° Request Payout"})})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"card-header",children:[(0,s.jsx)("h3",{className:"card-title",children:"Recent Leads"}),(0,s.jsx)(t.default,{href:"/agent/leads",className:"btn btn-secondary btn-sm",children:"View All"})]}),0===e.length?(0,s.jsxs)("div",{className:"empty-state",children:[(0,s.jsx)("div",{className:"empty-state-icon",children:"ðŸ‘¥"}),(0,s.jsx)("p",{children:"No leads yet. Share your referral link to start collecting!"}),(0,s.jsx)(t.default,{href:"/agent/collect",className:"btn btn-primary",style:{marginTop:"var(--spacing-lg)"},children:"âž• Add Your First Lead"})]}):(0,s.jsx)("div",{className:"table-container",children:(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Student Name"}),(0,s.jsx)("th",{children:"Course"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Date"})]})}),(0,s.jsx)("tbody",{children:e.slice(0,5).map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{style:{fontWeight:500},children:e.studentName}),(0,s.jsx)("td",{children:e.course?.name||"N/A"}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:`badge badge-${e.status.toLowerCase()}`,children:e.status})}),(0,s.jsx)("td",{style:{color:"var(--text-muted)"},children:new Date(e.createdAt).toLocaleDateString()})]},e.id))})]})})]})]})}e.s(["default",()=>l])}]);