{"version":3,"sources":["../../../../src/app/agent/leads/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface Lead {\r\n    id: string;\r\n    studentName: string;\r\n    phone: string;\r\n    email?: string;\r\n    status: string;\r\n    notes?: string;\r\n    createdAt: string;\r\n    course?: { name: string; fee: number };\r\n    center?: { name: string };\r\n}\r\n\r\nexport default function AgentLeadsPage() {\r\n    const [leads, setLeads] = useState<Lead[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [filter, setFilter] = useState('ALL');\r\n\r\n    useEffect(() => {\r\n        fetchLeads();\r\n    }, []);\r\n\r\n    const fetchLeads = async () => {\r\n        try {\r\n            const res = await fetch('/api/leads');\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setLeads(data.leads);\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to fetch leads:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const filteredLeads = filter === 'ALL'\r\n        ? leads\r\n        : leads.filter(l => l.status === filter);\r\n\r\n    const statusFilters = ['ALL', 'NEW', 'CONTACTED', 'INTERESTED', 'ENROLLED', 'CLOSED', 'LOST'];\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex-center\" style={{ padding: '4rem' }}>\r\n                <div className=\"spinner\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"fade-in\">\r\n            <div className=\"page-header flex-between\">\r\n                <div>\r\n                    <h1 className=\"page-title\">My Leads</h1>\r\n                    <p className=\"page-subtitle\">All leads you have collected</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"flex gap-sm\" style={{ marginBottom: 'var(--spacing-xl)', flexWrap: 'wrap' }}>\r\n                {statusFilters.map(status => (\r\n                    <button\r\n                        key={status}\r\n                        className={`btn btn-sm ${filter === status ? 'btn-primary' : 'btn-secondary'}`}\r\n                        onClick={() => setFilter(status)}\r\n                    >\r\n                        {status}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Leads Table */}\r\n            <div className=\"card\">\r\n                {filteredLeads.length === 0 ? (\r\n                    <div className=\"empty-state\">\r\n                        <div className=\"empty-state-icon\">ðŸ“‹</div>\r\n                        <p>No leads found {filter !== 'ALL' ? `with status \"${filter}\"` : ''}</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"table-container\">\r\n                        <table>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Student Name</th>\r\n                                    <th>Phone</th>\r\n                                    <th>Course</th>\r\n                                    <th>Center</th>\r\n                                    <th>Fee</th>\r\n                                    <th>Status</th>\r\n                                    <th>Date</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {filteredLeads.map(lead => (\r\n                                    <tr key={lead.id}>\r\n                                        <td>\r\n                                            <div style={{ fontWeight: 500 }}>{lead.studentName}</div>\r\n                                            {lead.email && (\r\n                                                <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>\r\n                                                    {lead.email}\r\n                                                </div>\r\n                                            )}\r\n                                        </td>\r\n                                        <td>{lead.phone}</td>\r\n                                        <td>{lead.course?.name || 'N/A'}</td>\r\n                                        <td style={{ color: 'var(--primary-light)' }}>\r\n                                            {lead.center?.name || 'N/A'}\r\n                                        </td>\r\n                                        <td>â‚¹{lead.course?.fee?.toLocaleString() || 'N/A'}</td>\r\n                                        <td>\r\n                                            <span className={`badge badge-${lead.status.toLowerCase()}`}>\r\n                                                {lead.status}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td style={{ color: 'var(--text-muted)' }}>\r\n                                            {new Date(lead.createdAt).toLocaleDateString()}\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Summary */}\r\n            <div className=\"grid grid-4\" style={{ marginTop: 'var(--spacing-xl)' }}>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\">{leads.filter(l => l.status === 'NEW').length}</div>\r\n                    <div className=\"stat-label\">New</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\">{leads.filter(l => l.status === 'INTERESTED').length}</div>\r\n                    <div className=\"stat-label\">Interested</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\">{leads.filter(l => ['ENROLLED', 'CLOSED'].includes(l.status)).length}</div>\r\n                    <div className=\"stat-label\">Converted</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\">{leads.filter(l => l.status === 'LOST').length}</div>\r\n                    <div className=\"stat-label\">Lost</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}