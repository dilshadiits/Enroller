{"version":3,"sources":["../../../../src/app/center/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\n\r\ninterface Lead {\r\n    id: string;\r\n    studentName: string;\r\n    status: string;\r\n    createdAt: string;\r\n    course?: { name: string };\r\n    agent?: { name: string };\r\n}\r\n\r\nexport default function CenterDashboard() {\r\n    const [leads, setLeads] = useState<Lead[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchLeads();\r\n    }, []);\r\n\r\n    const fetchLeads = async () => {\r\n        try {\r\n            const res = await fetch('/api/leads');\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setLeads(data.leads);\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to fetch leads:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const getStatusCount = (status: string) =>\r\n        leads.filter(l => l.status === status).length;\r\n\r\n    const conversionRate = leads.length > 0\r\n        ? (((getStatusCount('ENROLLED') + getStatusCount('CLOSED')) / leads.length) * 100).toFixed(1)\r\n        : 0;\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex-center\" style={{ padding: '4rem' }}>\r\n                <div className=\"spinner\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"fade-in\">\r\n            <div className=\"page-header\">\r\n                <h1 className=\"page-title\">Center Dashboard</h1>\r\n                <p className=\"page-subtitle\">Manage incoming leads and track conversions</p>\r\n            </div>\r\n\r\n            {/* Stats Grid */}\r\n            <div className=\"grid grid-4\" style={{ marginBottom: 'var(--spacing-xl)' }}>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\">{leads.length}</div>\r\n                    <div className=\"stat-label\">Total Leads</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value pulse\" style={{ color: 'var(--primary-light)' }}>\r\n                        {getStatusCount('NEW')}\r\n                    </div>\r\n                    <div className=\"stat-label\">New (Pending)</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\" style={{ color: 'var(--secondary)' }}>\r\n                        {getStatusCount('ENROLLED') + getStatusCount('CLOSED')}\r\n                    </div>\r\n                    <div className=\"stat-label\">Enrolled</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\">{conversionRate}%</div>\r\n                    <div className=\"stat-label\">Conversion Rate</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Pipeline Overview */}\r\n            <div className=\"grid grid-3\" style={{ marginBottom: 'var(--spacing-xl)' }}>\r\n                <div className=\"card\" style={{ borderTop: '3px solid var(--primary)' }}>\r\n                    <div className=\"flex-between\" style={{ marginBottom: 'var(--spacing-md)' }}>\r\n                        <h4>New Leads</h4>\r\n                        <span className=\"badge badge-new\">{getStatusCount('NEW')}</span>\r\n                    </div>\r\n                    <div className=\"progress-bar\">\r\n                        <div\r\n                            className=\"progress-fill\"\r\n                            style={{ width: leads.length > 0 ? `${(getStatusCount('NEW') / leads.length) * 100}%` : '0%' }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"card\" style={{ borderTop: '3px solid var(--accent)' }}>\r\n                    <div className=\"flex-between\" style={{ marginBottom: 'var(--spacing-md)' }}>\r\n                        <h4>In Progress</h4>\r\n                        <span className=\"badge badge-contacted\">\r\n                            {getStatusCount('CONTACTED') + getStatusCount('INTERESTED')}\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"progress-bar\">\r\n                        <div\r\n                            className=\"progress-fill\"\r\n                            style={{\r\n                                width: leads.length > 0\r\n                                    ? `${((getStatusCount('CONTACTED') + getStatusCount('INTERESTED')) / leads.length) * 100}%`\r\n                                    : '0%',\r\n                                background: 'linear-gradient(90deg, var(--accent) 0%, var(--secondary) 100%)'\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"card\" style={{ borderTop: '3px solid var(--secondary)' }}>\r\n                    <div className=\"flex-between\" style={{ marginBottom: 'var(--spacing-md)' }}>\r\n                        <h4>Converted</h4>\r\n                        <span className=\"badge badge-enrolled\">\r\n                            {getStatusCount('ENROLLED') + getStatusCount('CLOSED')}\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"progress-bar\">\r\n                        <div\r\n                            className=\"progress-fill\"\r\n                            style={{\r\n                                width: leads.length > 0\r\n                                    ? `${((getStatusCount('ENROLLED') + getStatusCount('CLOSED')) / leads.length) * 100}%`\r\n                                    : '0%',\r\n                                background: 'var(--secondary)'\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* New Leads Alert */}\r\n            {getStatusCount('NEW') > 0 && (\r\n                <div className=\"alert alert-warning\" style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                    <span>\r\n                        ‚ö†Ô∏è You have <strong>{getStatusCount('NEW')} new leads</strong> waiting to be processed!\r\n                    </span>\r\n                    <Link href=\"/center/leads\" className=\"btn btn-primary btn-sm\">\r\n                        Process Now\r\n                    </Link>\r\n                </div>\r\n            )}\r\n\r\n            {/* Recent Leads */}\r\n            <div className=\"card\">\r\n                <div className=\"card-header\">\r\n                    <h3 className=\"card-title\">Recent Leads</h3>\r\n                    <Link href=\"/center/leads\" className=\"btn btn-secondary btn-sm\">View All</Link>\r\n                </div>\r\n\r\n                {leads.length === 0 ? (\r\n                    <div className=\"empty-state\">\r\n                        <div className=\"empty-state-icon\">üì•</div>\r\n                        <p>No leads yet. Leads will appear here when agents submit them.</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"table-container\">\r\n                        <table>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Student Name</th>\r\n                                    <th>Course</th>\r\n                                    <th>Agent</th>\r\n                                    <th>Status</th>\r\n                                    <th>Date</th>\r\n                                    <th>Action</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {leads.slice(0, 5).map(lead => (\r\n                                    <tr key={lead.id}>\r\n                                        <td style={{ fontWeight: 500 }}>{lead.studentName}</td>\r\n                                        <td>{lead.course?.name || 'N/A'}</td>\r\n                                        <td>{lead.agent?.name || 'N/A'}</td>\r\n                                        <td>\r\n                                            <span className={`badge badge-${lead.status.toLowerCase()}`}>\r\n                                                {lead.status}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td style={{ color: 'var(--text-muted)' }}>\r\n                                            {new Date(lead.createdAt).toLocaleDateString()}\r\n                                        </td>\r\n                                        <td>\r\n                                            <Link href={`/center/leads?id=${lead.id}`} className=\"btn btn-secondary btn-sm\">\r\n                                                Manage\r\n                                            </Link>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}