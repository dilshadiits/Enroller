module.exports=[49882,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){(0,d.useRouter)();let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)({studentName:"",phone:"",email:"",courseId:"",notes:""}),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1);(0,c.useEffect)(()=>{p()},[]);let p=async()=>{try{let a=await fetch("/api/courses");if(a.ok){let b=await a.json();e(b.courses)}}catch(a){console.error("Failed to fetch courses:",a)}finally{i(!1)}},q=async a=>{a.preventDefault(),m(""),k(!0);try{let a=await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),b=await a.json();if(!a.ok)throw Error(b.error||"Failed to add lead");o(!0),g({studentName:"",phone:"",email:"",courseId:"",notes:""}),setTimeout(()=>{o(!1)},3e3)}catch(a){m(a instanceof Error?a.message:"Failed to add lead")}finally{k(!1)}},r=a.find(a=>a.id===f.courseId),s=r?r.fee*r.commissionPercent/100:0;return h?(0,b.jsx)("div",{className:"flex-center",style:{padding:"4rem"},children:(0,b.jsx)("div",{className:"spinner"})}):(0,b.jsxs)("div",{className:"fade-in",children:[(0,b.jsxs)("div",{className:"page-header",children:[(0,b.jsx)("h1",{className:"page-title",children:"Add New Lead"}),(0,b.jsx)("p",{className:"page-subtitle",children:"Manually add a lead to your collection"})]}),(0,b.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"2fr 1fr",gap:"var(--spacing-xl)"},children:[(0,b.jsxs)("div",{className:"card",children:[n&&(0,b.jsx)("div",{className:"alert alert-success",children:"âœ… Lead added successfully!"}),l&&(0,b.jsx)("div",{className:"alert alert-error",children:l}),(0,b.jsxs)("form",{onSubmit:q,children:[(0,b.jsxs)("div",{className:"form-row",children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"studentName",children:"Student Name *"}),(0,b.jsx)("input",{id:"studentName",type:"text",placeholder:"Enter student's full name",value:f.studentName,onChange:a=>g({...f,studentName:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"phone",children:"Phone Number *"}),(0,b.jsx)("input",{id:"phone",type:"tel",placeholder:"+91 9876543210",value:f.phone,onChange:a=>g({...f,phone:a.target.value}),required:!0})]})]}),(0,b.jsxs)("div",{className:"form-row",children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,b.jsx)("input",{id:"email",type:"email",placeholder:"student@example.com",value:f.email,onChange:a=>g({...f,email:a.target.value})})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"courseId",children:"Select Course *"}),(0,b.jsxs)("select",{id:"courseId",value:f.courseId,onChange:a=>g({...f,courseId:a.target.value}),required:!0,children:[(0,b.jsx)("option",{value:"",children:"Choose a course"}),a.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.name," (",a.center?.name,") - â‚¹",a.fee.toLocaleString()]},a.id))]})]})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"notes",children:"Notes (Optional)"}),(0,b.jsx)("textarea",{id:"notes",placeholder:"Any additional notes about this lead...",value:f.notes,onChange:a=>g({...f,notes:a.target.value}),rows:3})]}),(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",style:{marginTop:"var(--spacing-md)"},disabled:j,children:j?"Adding Lead...":"âž• Add Lead"})]})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"card",style:{position:"sticky",top:"100px"},children:[(0,b.jsx)("h3",{style:{marginBottom:"var(--spacing-lg)"},children:"Commission Preview"}),r?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{style:{marginBottom:"var(--spacing-lg)"},children:[(0,b.jsx)("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Selected Course"}),(0,b.jsx)("div",{style:{fontWeight:600},children:r.name})]}),(0,b.jsxs)("div",{style:{marginBottom:"var(--spacing-lg)"},children:[(0,b.jsx)("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Lead Goes To Center"}),(0,b.jsxs)("div",{style:{fontWeight:600,color:"var(--primary-light)",display:"flex",alignItems:"center",gap:"0.5rem"},children:["ðŸ¢ ",r.center?.name||"N/A"]})]}),(0,b.jsxs)("div",{style:{marginBottom:"var(--spacing-lg)"},children:[(0,b.jsx)("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Course Fee"}),(0,b.jsxs)("div",{style:{fontWeight:600},children:["â‚¹",r.fee.toLocaleString()]})]}),(0,b.jsxs)("div",{style:{marginBottom:"var(--spacing-lg)"},children:[(0,b.jsx)("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)"},children:"Commission Rate"}),(0,b.jsxs)("div",{style:{fontWeight:600},children:[r.commissionPercent,"%"]})]}),(0,b.jsxs)("div",{style:{padding:"var(--spacing-lg)",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(16, 185, 129, 0.1) 100%)",borderRadius:"var(--radius-md)",textAlign:"center"},children:[(0,b.jsx)("div",{style:{fontSize:"0.875rem",color:"var(--secondary)"},children:"You'll Earn"}),(0,b.jsxs)("div",{style:{fontSize:"2rem",fontWeight:700,color:"var(--secondary)"},children:["â‚¹",s.toLocaleString()]}),(0,b.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:"on successful enrollment"})]})]}):(0,b.jsx)("div",{style:{textAlign:"center",color:"var(--text-muted)"},children:(0,b.jsx)("p",{children:"Select a course to see your commission"})})]})})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=src_app_agent_collect_page_tsx_09bad460._.js.map