module.exports=[21132,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)("ALL");(0,c.useEffect)(()=>{k()},[]);let k=async()=>{try{console.log("Fetching payouts...");let a=await fetch("/api/payouts");if(console.log("Fetch payouts response status:",a.status),a.ok){let b=await a.json();console.log("Fetch payouts data:",b),d(b.payouts)}else{let b=await a.json().catch(()=>({}));console.error("Fetch payouts failed:",b)}}catch(a){console.error("Failed to fetch payouts:",a)}finally{f(!1)}},l=async(a,b)=>{h(a);try{let c=await fetch(`/api/payouts/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:b})});if(c.ok)k();else{let a=await c.json();alert(a.error||"Failed to process payout")}}catch(a){alert("Failed to process payout")}finally{h(null)}},m="ALL"===i?a:a.filter(a=>a.status===i),n={requested:a.filter(a=>"REQUESTED"===a.status).reduce((a,b)=>a+b.totalAmount,0),approved:a.filter(a=>"APPROVED"===a.status).reduce((a,b)=>a+b.totalAmount,0),paid:a.filter(a=>"PAID"===a.status).reduce((a,b)=>a+b.totalAmount,0)};return e?(0,b.jsx)("div",{className:"flex-center",style:{padding:"4rem"},children:(0,b.jsx)("div",{className:"spinner"})}):(0,b.jsxs)("div",{className:"fade-in",children:[(0,b.jsxs)("div",{className:"page-header",children:[(0,b.jsx)("h1",{className:"page-title",children:"Payout Management"}),(0,b.jsx)("p",{className:"page-subtitle",children:"Review and process agent payout requests"})]}),(0,b.jsxs)("div",{className:"grid grid-4",style:{marginBottom:"var(--spacing-xl)"},children:[(0,b.jsxs)("div",{className:"stat-card",children:[(0,b.jsx)("div",{className:"stat-value",children:a.length}),(0,b.jsx)("div",{className:"stat-label",children:"Total Requests"})]}),(0,b.jsxs)("div",{className:"stat-card",children:[(0,b.jsxs)("div",{className:"stat-value",style:{color:"var(--accent)"},children:["â‚¹",n.requested.toLocaleString()]}),(0,b.jsx)("div",{className:"stat-label",children:"Pending Review"})]}),(0,b.jsxs)("div",{className:"stat-card",children:[(0,b.jsxs)("div",{className:"stat-value",style:{color:"var(--primary-light)"},children:["â‚¹",n.approved.toLocaleString()]}),(0,b.jsx)("div",{className:"stat-label",children:"Approved (Unpaid)"})]}),(0,b.jsxs)("div",{className:"stat-card",children:[(0,b.jsxs)("div",{className:"stat-value",style:{color:"var(--secondary)"},children:["â‚¹",n.paid.toLocaleString()]}),(0,b.jsx)("div",{className:"stat-label",children:"Total Paid"})]})]}),(0,b.jsx)("div",{className:"flex gap-sm",style:{marginBottom:"var(--spacing-xl)"},children:["ALL","REQUESTED","APPROVED","PAID","REJECTED"].map(c=>(0,b.jsxs)("button",{className:`btn btn-sm ${i===c?"btn-primary":"btn-secondary"}`,onClick:()=>j(c),children:[c," (",a.filter(a=>"ALL"===c||a.status===c).length,")"]},c))}),(0,b.jsx)("div",{className:"card",children:0===m.length?(0,b.jsxs)("div",{className:"empty-state",children:[(0,b.jsx)("div",{className:"empty-state-icon",children:"ðŸ’³"}),(0,b.jsxs)("p",{children:["No payout requests ","ALL"!==i?`with status "${i}"`:""]})]}):(0,b.jsx)("div",{className:"table-container",children:(0,b.jsxs)("table",{children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Agent"}),(0,b.jsx)("th",{children:"Amount"}),(0,b.jsx)("th",{children:"Status"}),(0,b.jsx)("th",{children:"Requested"}),(0,b.jsx)("th",{children:"Actions"})]})}),(0,b.jsx)("tbody",{children:m.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsxs)("td",{children:[(0,b.jsx)("div",{style:{fontWeight:500},children:a.agent?.name||"Unknown"}),(0,b.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:a.agent?.email})]}),(0,b.jsxs)("td",{style:{fontWeight:600,color:"var(--secondary)",fontSize:"1.125rem"},children:["â‚¹",a.totalAmount.toLocaleString()]}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:`badge badge-${a.status.toLowerCase()}`,children:a.status})}),(0,b.jsx)("td",{style:{color:"var(--text-muted)"},children:new Date(a.requestedAt).toLocaleDateString()}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"flex gap-sm",children:["REQUESTED"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>l(a.id,"APPROVE"),className:"btn btn-success btn-sm",disabled:g===a.id,children:"Approve"}),(0,b.jsx)("button",{onClick:()=>l(a.id,"REJECT"),className:"btn btn-danger btn-sm",disabled:g===a.id,children:"Reject"})]}),"APPROVED"===a.status&&(0,b.jsx)("button",{onClick:()=>l(a.id,"MARK_PAID"),className:"btn btn-primary btn-sm",disabled:g===a.id,children:"Mark as Paid"}),"PAID"===a.status&&(0,b.jsx)("span",{style:{color:"var(--secondary)",fontSize:"0.875rem"},children:"âœ“ Completed"}),"REJECTED"===a.status&&(0,b.jsx)("span",{style:{color:"var(--danger)",fontSize:"0.875rem"},children:"âœ— Rejected"})]})})]},a.id))})]})})})]})}a.s(["default",()=>d])}];

//# sourceMappingURL=src_app_admin_payouts_page_tsx_09bcae14._.js.map