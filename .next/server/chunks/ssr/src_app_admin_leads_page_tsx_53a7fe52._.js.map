{"version":3,"sources":["../../../../src/app/admin/leads/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface Lead {\r\n    id: string;\r\n    studentName: string;\r\n    phone: string;\r\n    email?: string;\r\n    status: string;\r\n    createdAt: string;\r\n    course?: { name: string; fee: number };\r\n    agent?: { name: string };\r\n    center?: { name: string };\r\n}\r\n\r\nconst STATUSES = ['NEW', 'CONTACTED', 'INTERESTED', 'ENROLLED', 'CLOSED', 'LOST'];\r\n\r\nexport default function AdminLeadsPage() {\r\n    const [leads, setLeads] = useState<Lead[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [filter, setFilter] = useState('ALL');\r\n\r\n    useEffect(() => {\r\n        fetchLeads();\r\n    }, []);\r\n\r\n    const fetchLeads = async () => {\r\n        try {\r\n            const res = await fetch('/api/leads');\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setLeads(data.leads);\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to fetch leads:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const filteredLeads = filter === 'ALL' ? leads : leads.filter(l => l.status === filter);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex-center\" style={{ padding: '4rem' }}>\r\n                <div className=\"spinner\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"fade-in\">\r\n            <div className=\"page-header\">\r\n                <h1 className=\"page-title\">All Leads</h1>\r\n                <p className=\"page-subtitle\">Complete overview of all leads in the system</p>\r\n            </div>\r\n\r\n            {/* Stats */}\r\n            <div className=\"grid grid-4\" style={{ marginBottom: 'var(--spacing-xl)' }}>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\">{leads.length}</div>\r\n                    <div className=\"stat-label\">Total Leads</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\" style={{ color: 'var(--primary-light)' }}>\r\n                        {leads.filter(l => l.status === 'NEW').length}\r\n                    </div>\r\n                    <div className=\"stat-label\">New</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\" style={{ color: 'var(--secondary)' }}>\r\n                        {leads.filter(l => ['ENROLLED', 'CLOSED'].includes(l.status)).length}\r\n                    </div>\r\n                    <div className=\"stat-label\">Converted</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\">\r\n                        {leads.length > 0\r\n                            ? ((leads.filter(l => ['ENROLLED', 'CLOSED'].includes(l.status)).length / leads.length) * 100).toFixed(1)\r\n                            : 0}%\r\n                    </div>\r\n                    <div className=\"stat-label\">Conversion Rate</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"flex gap-sm\" style={{ marginBottom: 'var(--spacing-xl)', flexWrap: 'wrap' }}>\r\n                <button\r\n                    className={`btn btn-sm ${filter === 'ALL' ? 'btn-primary' : 'btn-secondary'}`}\r\n                    onClick={() => setFilter('ALL')}\r\n                >\r\n                    All ({leads.length})\r\n                </button>\r\n                {STATUSES.map(status => (\r\n                    <button\r\n                        key={status}\r\n                        className={`btn btn-sm ${filter === status ? 'btn-primary' : 'btn-secondary'}`}\r\n                        onClick={() => setFilter(status)}\r\n                    >\r\n                        {status} ({leads.filter(l => l.status === status).length})\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Leads Table */}\r\n            <div className=\"card\">\r\n                {filteredLeads.length === 0 ? (\r\n                    <div className=\"empty-state\">\r\n                        <div className=\"empty-state-icon\">ðŸ“‹</div>\r\n                        <p>No leads found</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"table-container\">\r\n                        <table>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Student</th>\r\n                                    <th>Contact</th>\r\n                                    <th>Course</th>\r\n                                    <th>Agent</th>\r\n                                    <th>Center</th>\r\n                                    <th>Status</th>\r\n                                    <th>Date</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {filteredLeads.map(lead => (\r\n                                    <tr key={lead.id}>\r\n                                        <td style={{ fontWeight: 500 }}>{lead.studentName}</td>\r\n                                        <td>\r\n                                            <div>{lead.phone}</div>\r\n                                            {lead.email && (\r\n                                                <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>\r\n                                                    {lead.email}\r\n                                                </div>\r\n                                            )}\r\n                                        </td>\r\n                                        <td>\r\n                                            <div>{lead.course?.name || 'N/A'}</div>\r\n                                            <div style={{ fontSize: '0.75rem', color: 'var(--secondary)' }}>\r\n                                                â‚¹{lead.course?.fee?.toLocaleString() || 'N/A'}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td>{lead.agent?.name || 'N/A'}</td>\r\n                                        <td>{lead.center?.name || 'N/A'}</td>\r\n                                        <td>\r\n                                            <span className={`badge badge-${lead.status.toLowerCase()}`}>\r\n                                                {lead.status}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td style={{ color: 'var(--text-muted)' }}>\r\n                                            {new Date(lead.createdAt).toLocaleDateString()}\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"qDAEA,EAAA,EAAA,CAAA,CAAA,OAcA,IAAM,EAAW,CAAC,MAAO,YAAa,aAAc,WAAY,SAAU,OAAO,CAElE,SAAS,IACpB,GAAM,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,EAAE,EACvC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,OAErC,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACN,GACJ,EAAG,EAAE,EAEL,IAAM,EAAa,UACf,GAAI,CACA,IAAM,EAAM,MAAM,MAAM,cACxB,GAAI,EAAI,EAAE,CAAE,CACR,IAAM,EAAO,MAAM,EAAI,IAAI,GAC3B,EAAS,EAAK,KAAK,CACvB,CACJ,CAAE,MAAO,EAAK,CACV,QAAQ,KAAK,CAAC,yBAA0B,EAC5C,QAAU,CACN,GAAW,EACf,CACJ,EAEM,EAA2B,QAAX,EAAmB,EAAQ,EAAM,MAAM,CAAC,GAAK,EAAE,MAAM,GAAK,UAEhF,AAAI,EAEI,CAAA,EAAA,EAAA,EAFK,CAEL,EAAC,MAAA,CAAI,UAAU,cAAc,MAAO,CAAE,QAAS,MAAO,WAClD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,cAMvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oBACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sBAAa,cAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,oDAIjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,cAAc,MAAO,CAAE,aAAc,mBAAoB,YACpE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBAAc,EAAM,MAAM,GACzC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBAAa,mBAEhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,aAAa,MAAO,CAAE,MAAO,sBAAuB,WAC9D,EAAM,MAAM,CAAC,GAAkB,QAAb,EAAE,MAAM,EAAY,MAAM,GAEjD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBAAa,WAEhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,aAAa,MAAO,CAAE,MAAO,kBAAmB,WAC1D,EAAM,MAAM,CAAC,GAAK,CAAC,WAAY,SAAS,CAAC,QAAQ,CAAC,EAAE,MAAM,GAAG,MAAM,GAExE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBAAa,iBAEhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACV,EAAM,MAAM,CAAG,EACV,CAAE,EAAM,MAAM,CAAC,GAAK,CAAC,WAAY,SAAS,CAAC,QAAQ,CAAC,EAAE,MAAM,GAAG,MAAM,CAAG,EAAM,MAAM,CAAI,GAAA,CAAG,CAAE,OAAO,CAAC,GACrG,EAAE,OAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBAAa,0BAKpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,cAAc,MAAO,CAAE,aAAc,oBAAqB,SAAU,MAAO,YACtF,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,UAAW,CAAC,WAAW,EAAa,QAAX,EAAmB,cAAgB,gBAAA,CAAiB,CAC7E,QAAS,IAAM,EAAU,iBAC5B,QACS,EAAM,MAAM,CAAC,OAEtB,EAAS,GAAG,CAAC,GACV,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAEG,UAAW,CAAC,WAAW,EAAE,IAAW,EAAS,cAAgB,gBAAA,CAAiB,CAC9E,QAAS,IAAM,EAAU,aAExB,EAAO,KAAG,EAAM,MAAM,CAAC,GAAK,EAAE,MAAM,GAAK,GAAQ,MAAM,CAAC,MAJpD,OAUjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACe,IAAzB,EAAc,MAAM,CACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4BAAmB,OAClC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,sBAGP,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2BACX,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACG,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,YACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,YACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,UACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,cAGZ,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACI,EAAc,GAAG,CAAC,GACf,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,MAAO,CAAE,WAAY,GAAI,WAAI,EAAK,WAAW,GACjD,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAK,EAAK,KAAK,GACf,EAAK,KAAK,EACP,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,UAAW,MAAO,mBAAoB,WACzD,EAAK,KAAK,MAIvB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAK,EAAK,MAAM,EAAE,MAAQ,QAC3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,UAAW,MAAO,kBAAmB,YAAG,IAC1D,EAAK,MAAM,EAAE,KAAK,kBAAoB,YAGhD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAI,EAAK,KAAK,EAAE,MAAQ,QACzB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAI,EAAK,MAAM,EAAE,MAAQ,QAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,YAAY,EAAE,EAAK,MAAM,CAAC,WAAW,GAAA,CAAI,UACtD,EAAK,MAAM,KAGpB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,MAAO,CAAE,MAAO,mBAAoB,WACnC,IAAI,KAAK,EAAK,SAAS,EAAE,kBAAkB,OAxB3C,EAAK,EAAE,cAmCpD"}