{"version":3,"sources":["../../../../src/app/center/courses/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface Lead {\r\n    id: string;\r\n    studentName: string;\r\n    status: string;\r\n    createdAt: string;\r\n}\r\n\r\ninterface Course {\r\n    id: string;\r\n    name: string;\r\n    description?: string;\r\n    fee: number;\r\n    commissionPercent: number;\r\n    isActive: boolean;\r\n    createdAt: string;\r\n    leads?: Lead[];\r\n    leadCount?: number;\r\n}\r\n\r\nexport default function CenterCoursesPage() {\r\n    const [courses, setCourses] = useState<Course[]>([]);\r\n    const [leads, setLeads] = useState<Lead[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [coursesRes, leadsRes] = await Promise.all([\r\n                fetch('/api/courses'),\r\n                fetch('/api/leads')\r\n            ]);\r\n\r\n            if (coursesRes.ok) {\r\n                const coursesData = await coursesRes.json();\r\n                setCourses(coursesData.courses);\r\n            }\r\n\r\n            if (leadsRes.ok) {\r\n                const leadsData = await leadsRes.json();\r\n                setLeads(leadsData.leads);\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to fetch data:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Calculate leads per course\r\n    const getLeadsForCourse = (courseId: string) => {\r\n        return leads.filter(lead => (lead as any).courseId === courseId);\r\n    };\r\n\r\n    const getStatusCount = (courseLeads: Lead[], status: string) => {\r\n        return courseLeads.filter(l => l.status === status).length;\r\n    };\r\n\r\n    const totalLeads = leads.length;\r\n    const activeCoursesCount = courses.filter(c => c.isActive).length;\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex-center\" style={{ padding: '4rem' }}>\r\n                <div className=\"spinner\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"fade-in\">\r\n            <div className=\"page-header\">\r\n                <h1 className=\"page-title\">Your Courses</h1>\r\n                <p className=\"page-subtitle\">View courses assigned to your center and their lead statistics</p>\r\n            </div>\r\n\r\n            {/* Stats */}\r\n            <div className=\"grid grid-3\" style={{ marginBottom: 'var(--spacing-xl)' }}>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\">{courses.length}</div>\r\n                    <div className=\"stat-label\">Total Courses</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\" style={{ color: 'var(--secondary)' }}>\r\n                        {activeCoursesCount}\r\n                    </div>\r\n                    <div className=\"stat-label\">Active Courses</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\" style={{ color: 'var(--primary-light)' }}>\r\n                        {totalLeads}\r\n                    </div>\r\n                    <div className=\"stat-label\">Total Leads</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Courses with Lead Stats */}\r\n            <div className=\"grid grid-2\">\r\n                {courses.map(course => {\r\n                    const courseLeads = getLeadsForCourse(course.id);\r\n                    const newCount = getStatusCount(courseLeads, 'NEW');\r\n                    const enrolledCount = getStatusCount(courseLeads, 'ENROLLED') + getStatusCount(courseLeads, 'CLOSED');\r\n                    const conversionRate = courseLeads.length > 0\r\n                        ? ((enrolledCount / courseLeads.length) * 100).toFixed(1)\r\n                        : 0;\r\n\r\n                    return (\r\n                        <div\r\n                            key={course.id}\r\n                            className=\"card\"\r\n                            style={{\r\n                                borderTop: `3px solid ${course.isActive ? 'var(--secondary)' : 'var(--text-muted)'}`,\r\n                            }}\r\n                        >\r\n                            <div className=\"flex-between\" style={{ marginBottom: 'var(--spacing-md)' }}>\r\n                                <h3 style={{ fontSize: '1.25rem' }}>{course.name}</h3>\r\n                                <span className={`badge ${course.isActive ? 'badge-enrolled' : 'badge-lost'}`}>\r\n                                    {course.isActive ? 'Active' : 'Inactive'}\r\n                                </span>\r\n                            </div>\r\n\r\n                            <p style={{ fontSize: '0.875rem', marginBottom: 'var(--spacing-lg)', color: 'var(--text-secondary)' }}>\r\n                                {course.description || 'No description available'}\r\n                            </p>\r\n\r\n                            {/* Course Info */}\r\n                            <div style={{\r\n                                display: 'grid',\r\n                                gridTemplateColumns: 'repeat(2, 1fr)',\r\n                                gap: 'var(--spacing-md)',\r\n                                padding: 'var(--spacing-md)',\r\n                                background: 'var(--bg-tertiary)',\r\n                                borderRadius: 'var(--radius-md)',\r\n                                marginBottom: 'var(--spacing-lg)'\r\n                            }}>\r\n                                <div>\r\n                                    <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>Course Fee</div>\r\n                                    <div style={{ fontWeight: 600, color: 'var(--secondary)' }}>\r\n                                        â‚¹{course.fee.toLocaleString()}\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>Agent Commission</div>\r\n                                    <div style={{ fontWeight: 600 }}>{course.commissionPercent}%</div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Lead Stats */}\r\n                            <div style={{\r\n                                padding: 'var(--spacing-md)',\r\n                                background: 'linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(6, 182, 212, 0.1))',\r\n                                borderRadius: 'var(--radius-md)',\r\n                                border: '1px solid var(--border-color)'\r\n                            }}>\r\n                                <div style={{\r\n                                    fontSize: '0.75rem',\r\n                                    color: 'var(--text-muted)',\r\n                                    marginBottom: 'var(--spacing-sm)',\r\n                                    fontWeight: 500\r\n                                }}>\r\n                                    Lead Statistics\r\n                                </div>\r\n                                <div style={{\r\n                                    display: 'grid',\r\n                                    gridTemplateColumns: 'repeat(4, 1fr)',\r\n                                    gap: 'var(--spacing-sm)',\r\n                                    textAlign: 'center'\r\n                                }}>\r\n                                    <div>\r\n                                        <div style={{ fontSize: '1.5rem', fontWeight: 700, color: 'var(--primary-light)' }}>\r\n                                            {courseLeads.length}\r\n                                        </div>\r\n                                        <div style={{ fontSize: '0.7rem', color: 'var(--text-muted)' }}>Total</div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <div style={{ fontSize: '1.5rem', fontWeight: 700, color: 'var(--accent)' }}>\r\n                                            {newCount}\r\n                                        </div>\r\n                                        <div style={{ fontSize: '0.7rem', color: 'var(--text-muted)' }}>New</div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <div style={{ fontSize: '1.5rem', fontWeight: 700, color: 'var(--success)' }}>\r\n                                            {enrolledCount}\r\n                                        </div>\r\n                                        <div style={{ fontSize: '0.7rem', color: 'var(--text-muted)' }}>Enrolled</div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <div style={{ fontSize: '1.5rem', fontWeight: 700, color: 'var(--secondary)' }}>\r\n                                            {conversionRate}%\r\n                                        </div>\r\n                                        <div style={{ fontSize: '0.7rem', color: 'var(--text-muted)' }}>Conv.</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {courses.length === 0 && (\r\n                <div className=\"card\">\r\n                    <div className=\"empty-state\">\r\n                        <div className=\"empty-state-icon\">ðŸ“š</div>\r\n                        <p>No courses assigned to your center yet.</p>\r\n                        <p style={{ fontSize: '0.875rem', color: 'var(--text-muted)' }}>\r\n                            Contact an admin to add courses to your center.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}