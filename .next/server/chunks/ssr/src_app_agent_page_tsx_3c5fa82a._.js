module.exports=[10808,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246);function e(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)({total:0,pending:0,paid:0}),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)("");(0,c.useEffect)(()=>{m(window.location.origin),n()},[]);let n=async()=>{try{let[a,b,c]=await Promise.all([fetch("/api/leads"),fetch("/api/commissions"),fetch("/api/auth/me")]);if(a.ok){let b=await a.json();e(b.leads)}if(b.ok){let a=await b.json();g(a.totals)}if(c.ok){let a=await c.json();k(a.user.id)}}catch(a){console.error("Failed to fetch data:",a)}finally{i(!1)}},o=b=>a.filter(a=>a.status===b).length;return h?(0,b.jsx)("div",{className:"flex-center",style:{padding:"4rem"},children:(0,b.jsx)("div",{className:"spinner"})}):(0,b.jsxs)("div",{className:"fade-in",children:[(0,b.jsxs)("div",{className:"page-header",children:[(0,b.jsx)("h1",{className:"page-title",children:"Agent Dashboard"}),(0,b.jsx)("p",{className:"page-subtitle",children:"Track your leads and earnings"})]}),(0,b.jsx)("div",{className:"card",style:{marginBottom:"var(--spacing-xl)",borderLeft:"3px solid var(--primary)"},children:(0,b.jsxs)("div",{className:"flex-between",style:{flexWrap:"wrap",gap:"var(--spacing-md)"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{style:{marginBottom:"var(--spacing-sm)"},children:"Your Referral Link"}),(0,b.jsx)("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"Share this link to collect leads"})]}),(0,b.jsxs)("div",{className:"url-input-group",children:[(0,b.jsx)("input",{type:"text",value:j&&l?`${l}/collect/${j}`:"",readOnly:!0,style:{maxWidth:"400px"}}),(0,b.jsx)("button",{onClick:()=>{let a=`${window.location.origin}/collect/${j}`;navigator.clipboard.writeText(a),alert("Link copied to clipboard!")},className:"btn btn-primary btn-sm",children:"ðŸ“‹ Copy"})]})]})}),(0,b.jsxs)("div",{className:"grid grid-4",style:{marginBottom:"var(--spacing-xl)"},children:[(0,b.jsxs)("div",{className:"stat-card",children:[(0,b.jsx)("div",{className:"stat-value",children:a.length}),(0,b.jsx)("div",{className:"stat-label",children:"Total Leads"})]}),(0,b.jsxs)("div",{className:"stat-card",children:[(0,b.jsx)("div",{className:"stat-value",style:{color:"var(--primary-light)"},children:o("NEW")+o("CONTACTED")+o("INTERESTED")}),(0,b.jsx)("div",{className:"stat-label",children:"Active Leads"})]}),(0,b.jsxs)("div",{className:"stat-card",children:[(0,b.jsx)("div",{className:"stat-value",style:{color:"var(--secondary)"},children:o("ENROLLED")+o("CLOSED")}),(0,b.jsx)("div",{className:"stat-label",children:"Conversions"})]}),(0,b.jsxs)("div",{className:"stat-card",children:[(0,b.jsxs)("div",{className:"stat-value",children:["â‚¹",f.total.toLocaleString()]}),(0,b.jsx)("div",{className:"stat-label",children:"Total Earnings"})]})]}),(0,b.jsxs)("div",{className:"grid grid-3",style:{marginBottom:"var(--spacing-xl)"},children:[(0,b.jsxs)("div",{className:"card",style:{borderTop:"3px solid var(--accent)"},children:[(0,b.jsx)("h4",{style:{color:"var(--accent)",marginBottom:"var(--spacing-sm)"},children:"Pending"}),(0,b.jsxs)("div",{className:"commission-amount",children:["â‚¹",f.pending.toLocaleString()]}),(0,b.jsx)("p",{style:{fontSize:"0.875rem",marginTop:"var(--spacing-sm)"},children:"Awaiting payout"})]}),(0,b.jsxs)("div",{className:"card",style:{borderTop:"3px solid var(--secondary)"},children:[(0,b.jsx)("h4",{style:{color:"var(--secondary)",marginBottom:"var(--spacing-sm)"},children:"Paid"}),(0,b.jsxs)("div",{className:"commission-amount",style:{color:"var(--secondary)"},children:["â‚¹",f.paid.toLocaleString()]}),(0,b.jsx)("p",{style:{fontSize:"0.875rem",marginTop:"var(--spacing-sm)"},children:"Successfully withdrawn"})]}),(0,b.jsx)("div",{className:"card",style:{borderTop:"3px solid var(--primary)"},children:(0,b.jsx)(d.default,{href:"/agent/commissions",className:"btn btn-primary",style:{width:"100%"},children:"ðŸ’° Request Payout"})})]}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsxs)("div",{className:"card-header",children:[(0,b.jsx)("h3",{className:"card-title",children:"Recent Leads"}),(0,b.jsx)(d.default,{href:"/agent/leads",className:"btn btn-secondary btn-sm",children:"View All"})]}),0===a.length?(0,b.jsxs)("div",{className:"empty-state",children:[(0,b.jsx)("div",{className:"empty-state-icon",children:"ðŸ‘¥"}),(0,b.jsx)("p",{children:"No leads yet. Share your referral link to start collecting!"}),(0,b.jsx)(d.default,{href:"/agent/collect",className:"btn btn-primary",style:{marginTop:"var(--spacing-lg)"},children:"âž• Add Your First Lead"})]}):(0,b.jsx)("div",{className:"table-container",children:(0,b.jsxs)("table",{children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Student Name"}),(0,b.jsx)("th",{children:"Course"}),(0,b.jsx)("th",{children:"Status"}),(0,b.jsx)("th",{children:"Date"})]})}),(0,b.jsx)("tbody",{children:a.slice(0,5).map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{style:{fontWeight:500},children:a.studentName}),(0,b.jsx)("td",{children:a.course?.name||"N/A"}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:`badge badge-${a.status.toLowerCase()}`,children:a.status})}),(0,b.jsx)("td",{style:{color:"var(--text-muted)"},children:new Date(a.createdAt).toLocaleDateString()})]},a.id))})]})})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=src_app_agent_page_tsx_3c5fa82a._.js.map