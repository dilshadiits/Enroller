module.exports=[78130,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)("ALL"),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)({name:"",email:"",password:"",role:"AGENT",phone:""});(0,c.useEffect)(()=>{u()},[]);let u=async()=>{try{let a=await fetch("/api/users");if(a.ok){let b=await a.json();d(b.users)}}catch(a){console.error("Failed to fetch users:",a)}finally{f(!1)}},v=async a=>{a.preventDefault(),p(""),n(!0);try{let a=k?`/api/users/${k.id}`:"/api/users",b=k?"PUT":"POST",c={...s};k&&!c.password&&delete c.password;let d=await fetch(a,{method:b,headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),e=await d.json();if(!d.ok)throw Error(e.error||"Operation failed");r(k?`User ${s.name} updated successfully!`:`User ${s.name} created successfully!`),t({name:"",email:"",password:"",role:"AGENT",phone:""}),j(!1),l(null),u(),setTimeout(()=>r(""),3e3)}catch(a){p(a instanceof Error?a.message:"Operation failed")}finally{n(!1)}},w=async a=>{if(confirm(`Are you sure you want to delete ${a.name}? This action cannot be undone.`))try{let b=await fetch(`/api/users/${a.id}`,{method:"DELETE"}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to delete user");r(`User ${a.name} deleted successfully!`),u(),setTimeout(()=>r(""),3e3)}catch(a){p(a instanceof Error?a.message:"Failed to delete user"),setTimeout(()=>p(""),3e3)}},x="ALL"===g?a:a.filter(a=>a.role===g);return e?(0,b.jsx)("div",{className:"flex-center",style:{padding:"4rem"},children:(0,b.jsx)("div",{className:"spinner"})}):(0,b.jsxs)("div",{className:"fade-in",children:[(0,b.jsxs)("div",{className:"page-header flex-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"page-title",children:"User Management"}),(0,b.jsx)("p",{className:"page-subtitle",children:"Manage agents, centers, and admins"})]}),(0,b.jsx)("button",{onClick:()=>{l(null),t({name:"",email:"",password:"",role:"AGENT",phone:""}),p(""),j(!0)},className:"btn btn-primary ripple",children:"âž• Create User"})]}),q&&(0,b.jsx)("div",{className:"alert alert-success",children:q}),o&&!i&&(0,b.jsx)("div",{className:"alert alert-error",children:o}),(0,b.jsxs)("div",{className:"grid grid-4",style:{marginBottom:"var(--spacing-xl)"},children:[(0,b.jsxs)("div",{className:"stat-card hover-pop",children:[(0,b.jsx)("div",{className:"stat-value",children:a.length}),(0,b.jsx)("div",{className:"stat-label",children:"Total Users"})]}),(0,b.jsxs)("div",{className:"stat-card hover-pop",children:[(0,b.jsx)("div",{className:"stat-value",style:{color:"var(--primary-light)"},children:a.filter(a=>"AGENT"===a.role).length}),(0,b.jsx)("div",{className:"stat-label",children:"Agents"})]}),(0,b.jsxs)("div",{className:"stat-card hover-pop",children:[(0,b.jsx)("div",{className:"stat-value",style:{color:"var(--secondary)"},children:a.filter(a=>"CENTER"===a.role).length}),(0,b.jsx)("div",{className:"stat-label",children:"Centers"})]}),(0,b.jsxs)("div",{className:"stat-card hover-pop",children:[(0,b.jsx)("div",{className:"stat-value",style:{color:"var(--accent)"},children:a.filter(a=>"ADMIN"===a.role).length}),(0,b.jsx)("div",{className:"stat-label",children:"Admins"})]})]}),(0,b.jsx)("div",{className:"flex gap-sm",style:{marginBottom:"var(--spacing-xl)"},children:["ALL","AGENT","CENTER","ADMIN"].map(a=>(0,b.jsx)("button",{className:`btn btn-sm ${g===a?"btn-primary":"btn-secondary"}`,onClick:()=>h(a),children:a},a))}),(0,b.jsx)("div",{className:"card",children:(0,b.jsx)("div",{className:"table-container",children:(0,b.jsxs)("table",{children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Name"}),(0,b.jsx)("th",{children:"Email"}),(0,b.jsx)("th",{children:"Phone"}),(0,b.jsx)("th",{children:"Role"}),(0,b.jsx)("th",{children:"Joined"}),(0,b.jsx)("th",{children:"Actions"})]})}),(0,b.jsx)("tbody",{children:x.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{style:{fontWeight:500},children:a.name}),(0,b.jsx)("td",{children:a.email}),(0,b.jsx)("td",{children:a.phone||"-"}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:`badge badge-${"ADMIN"===a.role?"contacted":"CENTER"===a.role?"interested":"new"}`,children:a.role})}),(0,b.jsx)("td",{style:{color:"var(--text-muted)"},children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"flex gap-sm",children:[(0,b.jsx)("button",{onClick:()=>{l(a),t({name:a.name,email:a.email,password:"",role:a.role,phone:a.phone||""}),p(""),j(!0)},className:"btn btn-sm btn-secondary",title:"Edit User",children:"âœï¸"}),(0,b.jsx)("button",{onClick:()=>w(a),className:"btn btn-sm btn-danger",title:"Delete User",children:"ðŸ—‘ï¸"})]})})]},a.id))})]})})}),i&&(0,b.jsx)("div",{className:"modal-overlay",onClick:()=>j(!1),children:(0,b.jsxs)("div",{className:"modal",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"modal-header",children:[(0,b.jsx)("h2",{children:k?"Edit User":"Create New User"}),(0,b.jsx)("button",{className:"modal-close",onClick:()=>j(!1),children:"Ã—"})]}),o&&(0,b.jsx)("div",{className:"alert alert-error",children:o}),(0,b.jsxs)("form",{onSubmit:v,children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"name",children:"Full Name"}),(0,b.jsx)("input",{id:"name",type:"text",placeholder:"John Doe",value:s.name,onChange:a=>t({...s,name:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"form-row",children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,b.jsx)("input",{id:"email",type:"email",placeholder:"user@example.com",value:s.email,onChange:a=>t({...s,email:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),(0,b.jsx)("input",{id:"phone",type:"tel",placeholder:"+91 9876543210",value:s.phone,onChange:a=>t({...s,phone:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"form-row",children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"password",children:k?"New Password (leave blank to keep)":"Password"}),(0,b.jsx)("input",{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:s.password,onChange:a=>t({...s,password:a.target.value}),required:!k,minLength:6})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"role",children:"Role"}),(0,b.jsxs)("select",{id:"role",value:s.role,onChange:a=>t({...s,role:a.target.value}),required:!0,children:[(0,b.jsx)("option",{value:"AGENT",children:"Admission Agent"}),(0,b.jsx)("option",{value:"CENTER",children:"Training Center"}),(0,b.jsx)("option",{value:"ADMIN",children:"Admin"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-md",style:{marginTop:"var(--spacing-lg)"},children:[(0,b.jsx)("button",{type:"button",onClick:()=>j(!1),className:"btn btn-secondary",style:{flex:1},children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"btn btn-primary ripple",style:{flex:1},disabled:m,children:m?k?"Updating...":"Creating...":k?"âœ“ Update User":"âœ“ Create User"})]})]})]})})]})}a.s(["default",()=>d])}];

//# sourceMappingURL=src_app_admin_users_page_tsx_aef2c918._.js.map