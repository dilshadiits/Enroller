{"version":3,"sources":["../../../../src/app/admin/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\n\r\ninterface Lead {\r\n    id: string;\r\n    status: string;\r\n    createdAt: string;\r\n}\r\n\r\ninterface Payout {\r\n    id: string;\r\n    status: string;\r\n    totalAmount: number;\r\n}\r\n\r\ninterface User {\r\n    id: string;\r\n    role: string;\r\n}\r\n\r\nexport default function AdminDashboard() {\r\n    const [leads, setLeads] = useState<Lead[]>([]);\r\n    const [payouts, setPayouts] = useState<Payout[]>([]);\r\n    const [users, setUsers] = useState<User[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [leadsRes, payoutsRes, usersRes] = await Promise.all([\r\n                fetch('/api/leads'),\r\n                fetch('/api/payouts'),\r\n                fetch('/api/users'),\r\n            ]);\r\n\r\n            if (leadsRes.ok) {\r\n                const data = await leadsRes.json();\r\n                setLeads(data.leads);\r\n            }\r\n\r\n            if (payoutsRes.ok) {\r\n                const data = await payoutsRes.json();\r\n                setPayouts(data.payouts);\r\n            }\r\n\r\n            if (usersRes.ok) {\r\n                const data = await usersRes.json();\r\n                setUsers(data.users);\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to fetch data:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const getStatusCount = (status: string) =>\r\n        leads.filter(l => l.status === status).length;\r\n\r\n    const pendingPayouts = payouts.filter(p => p.status === 'REQUESTED');\r\n    const pendingPayoutTotal = pendingPayouts.reduce((sum, p) => sum + p.totalAmount, 0);\r\n\r\n    const agentCount = users.filter(u => u.role === 'AGENT').length;\r\n    const centerCount = users.filter(u => u.role === 'CENTER').length;\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex-center\" style={{ padding: '4rem' }}>\r\n                <div className=\"spinner\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"fade-in\">\r\n            <div className=\"page-header\">\r\n                <h1 className=\"page-title\">Admin Dashboard</h1>\r\n                <p className=\"page-subtitle\">System overview and management</p>\r\n            </div>\r\n\r\n            {/* Main Stats */}\r\n            <div className=\"grid grid-4\" style={{ marginBottom: 'var(--spacing-xl)' }}>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\">{leads.length}</div>\r\n                    <div className=\"stat-label\">Total Leads</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\" style={{ color: 'var(--primary-light)' }}>{agentCount}</div>\r\n                    <div className=\"stat-label\">Active Agents</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\" style={{ color: 'var(--secondary)' }}>{centerCount}</div>\r\n                    <div className=\"stat-label\">Training Centers</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\" style={{ color: 'var(--accent)' }}>\r\n                        {pendingPayouts.length}\r\n                    </div>\r\n                    <div className=\"stat-label\">Pending Payouts</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Pending Payouts Alert */}\r\n            {pendingPayouts.length > 0 && (\r\n                <div className=\"alert alert-warning\" style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                    <span>\r\n                        ‚ö†Ô∏è You have <strong>{pendingPayouts.length} payout requests</strong> totaling <strong>‚Çπ{pendingPayoutTotal.toLocaleString()}</strong>\r\n                    </span>\r\n                    <Link href=\"/admin/payouts\" className=\"btn btn-primary btn-sm\">\r\n                        Review Payouts\r\n                    </Link>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"grid\" style={{ gridTemplateColumns: '2fr 1fr', gap: 'var(--spacing-xl)' }}>\r\n                {/* Lead Pipeline */}\r\n                <div className=\"card\">\r\n                    <div className=\"card-header\">\r\n                        <h3 className=\"card-title\">Lead Pipeline</h3>\r\n                        <Link href=\"/admin/leads\" className=\"btn btn-secondary btn-sm\">View All</Link>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-3\" style={{ gap: 'var(--spacing-md)' }}>\r\n                        <div style={{\r\n                            padding: 'var(--spacing-md)',\r\n                            background: 'rgba(99, 102, 241, 0.1)',\r\n                            borderRadius: 'var(--radius-md)',\r\n                            textAlign: 'center'\r\n                        }}>\r\n                            <div style={{ fontSize: '1.5rem', fontWeight: 700, color: 'var(--primary-light)' }}>\r\n                                {getStatusCount('NEW')}\r\n                            </div>\r\n                            <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>NEW</div>\r\n                        </div>\r\n\r\n                        <div style={{\r\n                            padding: 'var(--spacing-md)',\r\n                            background: 'rgba(245, 158, 11, 0.1)',\r\n                            borderRadius: 'var(--radius-md)',\r\n                            textAlign: 'center'\r\n                        }}>\r\n                            <div style={{ fontSize: '1.5rem', fontWeight: 700, color: 'var(--accent)' }}>\r\n                                {getStatusCount('CONTACTED') + getStatusCount('INTERESTED')}\r\n                            </div>\r\n                            <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>IN PROGRESS</div>\r\n                        </div>\r\n\r\n                        <div style={{\r\n                            padding: 'var(--spacing-md)',\r\n                            background: 'rgba(16, 185, 129, 0.1)',\r\n                            borderRadius: 'var(--radius-md)',\r\n                            textAlign: 'center'\r\n                        }}>\r\n                            <div style={{ fontSize: '1.5rem', fontWeight: 700, color: 'var(--secondary)' }}>\r\n                                {getStatusCount('ENROLLED') + getStatusCount('CLOSED')}\r\n                            </div>\r\n                            <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>CONVERTED</div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={{ marginTop: 'var(--spacing-lg)' }}>\r\n                        <div style={{ fontSize: '0.875rem', color: 'var(--text-muted)', marginBottom: 'var(--spacing-sm)' }}>\r\n                            Conversion Rate\r\n                        </div>\r\n                        <div className=\"progress-bar\" style={{ height: '12px' }}>\r\n                            <div\r\n                                className=\"progress-fill\"\r\n                                style={{\r\n                                    width: leads.length > 0\r\n                                        ? `${((getStatusCount('ENROLLED') + getStatusCount('CLOSED')) / leads.length) * 100}%`\r\n                                        : '0%'\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        <div style={{ textAlign: 'right', marginTop: 'var(--spacing-xs)', fontSize: '0.875rem', fontWeight: 600 }}>\r\n                            {leads.length > 0\r\n                                ? (((getStatusCount('ENROLLED') + getStatusCount('CLOSED')) / leads.length) * 100).toFixed(1)\r\n                                : 0}%\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Quick Actions */}\r\n                <div className=\"card\">\r\n                    <h3 className=\"card-title\" style={{ marginBottom: 'var(--spacing-lg)' }}>Quick Actions</h3>\r\n\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--spacing-md)' }}>\r\n                        <Link href=\"/admin/users\" className=\"btn btn-secondary\" style={{ justifyContent: 'flex-start' }}>\r\n                            üë• Manage Users\r\n                        </Link>\r\n                        <Link href=\"/admin/payouts\" className=\"btn btn-secondary\" style={{ justifyContent: 'flex-start' }}>\r\n                            üí≥ Process Payouts\r\n                        </Link>\r\n                        <Link href=\"/admin/courses\" className=\"btn btn-secondary\" style={{ justifyContent: 'flex-start' }}>\r\n                            üìö Manage Courses\r\n                        </Link>\r\n                        <Link href=\"/admin/leads\" className=\"btn btn-secondary\" style={{ justifyContent: 'flex-start' }}>\r\n                            üìã View All Leads\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}