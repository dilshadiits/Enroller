{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/EDMAN/src/app/admin/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\n\r\ninterface Lead {\r\n    id: string;\r\n    status: string;\r\n    createdAt: string;\r\n}\r\n\r\ninterface Payout {\r\n    id: string;\r\n    status: string;\r\n    totalAmount: number;\r\n}\r\n\r\ninterface User {\r\n    id: string;\r\n    role: string;\r\n}\r\n\r\nexport default function AdminDashboard() {\r\n    const [leads, setLeads] = useState<Lead[]>([]);\r\n    const [payouts, setPayouts] = useState<Payout[]>([]);\r\n    const [users, setUsers] = useState<User[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [leadsRes, payoutsRes, usersRes] = await Promise.all([\r\n                fetch('/api/leads'),\r\n                fetch('/api/payouts'),\r\n                fetch('/api/users'),\r\n            ]);\r\n\r\n            if (leadsRes.ok) {\r\n                const data = await leadsRes.json();\r\n                setLeads(data.leads);\r\n            }\r\n\r\n            if (payoutsRes.ok) {\r\n                const data = await payoutsRes.json();\r\n                setPayouts(data.payouts);\r\n            }\r\n\r\n            if (usersRes.ok) {\r\n                const data = await usersRes.json();\r\n                setUsers(data.users);\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to fetch data:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const getStatusCount = (status: string) =>\r\n        leads.filter(l => l.status === status).length;\r\n\r\n    const pendingPayouts = payouts.filter(p => p.status === 'REQUESTED');\r\n    const pendingPayoutTotal = pendingPayouts.reduce((sum, p) => sum + p.totalAmount, 0);\r\n\r\n    const agentCount = users.filter(u => u.role === 'AGENT').length;\r\n    const centerCount = users.filter(u => u.role === 'CENTER').length;\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex-center\" style={{ padding: '4rem' }}>\r\n                <div className=\"spinner\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"fade-in\">\r\n            <div className=\"page-header\">\r\n                <h1 className=\"page-title\">Admin Dashboard</h1>\r\n                <p className=\"page-subtitle\">System overview and management</p>\r\n            </div>\r\n\r\n            {/* Main Stats */}\r\n            <div className=\"grid grid-4\" style={{ marginBottom: 'var(--spacing-xl)' }}>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\">{leads.length}</div>\r\n                    <div className=\"stat-label\">Total Leads</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\" style={{ color: 'var(--primary-light)' }}>{agentCount}</div>\r\n                    <div className=\"stat-label\">Active Agents</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\" style={{ color: 'var(--secondary)' }}>{centerCount}</div>\r\n                    <div className=\"stat-label\">Training Centers</div>\r\n                </div>\r\n                <div className=\"stat-card\">\r\n                    <div className=\"stat-value\" style={{ color: 'var(--accent)' }}>\r\n                        {pendingPayouts.length}\r\n                    </div>\r\n                    <div className=\"stat-label\">Pending Payouts</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Pending Payouts Alert */}\r\n            {pendingPayouts.length > 0 && (\r\n                <div className=\"alert alert-warning\" style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                    <span>\r\n                        ‚ö†Ô∏è You have <strong>{pendingPayouts.length} payout requests</strong> totaling <strong>‚Çπ{pendingPayoutTotal.toLocaleString()}</strong>\r\n                    </span>\r\n                    <Link href=\"/admin/payouts\" className=\"btn btn-primary btn-sm\">\r\n                        Review Payouts\r\n                    </Link>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"grid\" style={{ gridTemplateColumns: '2fr 1fr', gap: 'var(--spacing-xl)' }}>\r\n                {/* Lead Pipeline */}\r\n                <div className=\"card\">\r\n                    <div className=\"card-header\">\r\n                        <h3 className=\"card-title\">Lead Pipeline</h3>\r\n                        <Link href=\"/admin/leads\" className=\"btn btn-secondary btn-sm\">View All</Link>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-3\" style={{ gap: 'var(--spacing-md)' }}>\r\n                        <div style={{\r\n                            padding: 'var(--spacing-md)',\r\n                            background: 'rgba(99, 102, 241, 0.1)',\r\n                            borderRadius: 'var(--radius-md)',\r\n                            textAlign: 'center'\r\n                        }}>\r\n                            <div style={{ fontSize: '1.5rem', fontWeight: 700, color: 'var(--primary-light)' }}>\r\n                                {getStatusCount('NEW')}\r\n                            </div>\r\n                            <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>NEW</div>\r\n                        </div>\r\n\r\n                        <div style={{\r\n                            padding: 'var(--spacing-md)',\r\n                            background: 'rgba(245, 158, 11, 0.1)',\r\n                            borderRadius: 'var(--radius-md)',\r\n                            textAlign: 'center'\r\n                        }}>\r\n                            <div style={{ fontSize: '1.5rem', fontWeight: 700, color: 'var(--accent)' }}>\r\n                                {getStatusCount('CONTACTED') + getStatusCount('INTERESTED')}\r\n                            </div>\r\n                            <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>IN PROGRESS</div>\r\n                        </div>\r\n\r\n                        <div style={{\r\n                            padding: 'var(--spacing-md)',\r\n                            background: 'rgba(16, 185, 129, 0.1)',\r\n                            borderRadius: 'var(--radius-md)',\r\n                            textAlign: 'center'\r\n                        }}>\r\n                            <div style={{ fontSize: '1.5rem', fontWeight: 700, color: 'var(--secondary)' }}>\r\n                                {getStatusCount('ENROLLED') + getStatusCount('CLOSED')}\r\n                            </div>\r\n                            <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>CONVERTED</div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={{ marginTop: 'var(--spacing-lg)' }}>\r\n                        <div style={{ fontSize: '0.875rem', color: 'var(--text-muted)', marginBottom: 'var(--spacing-sm)' }}>\r\n                            Conversion Rate\r\n                        </div>\r\n                        <div className=\"progress-bar\" style={{ height: '12px' }}>\r\n                            <div\r\n                                className=\"progress-fill\"\r\n                                style={{\r\n                                    width: leads.length > 0\r\n                                        ? `${((getStatusCount('ENROLLED') + getStatusCount('CLOSED')) / leads.length) * 100}%`\r\n                                        : '0%'\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        <div style={{ textAlign: 'right', marginTop: 'var(--spacing-xs)', fontSize: '0.875rem', fontWeight: 600 }}>\r\n                            {leads.length > 0\r\n                                ? (((getStatusCount('ENROLLED') + getStatusCount('CLOSED')) / leads.length) * 100).toFixed(1)\r\n                                : 0}%\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Quick Actions */}\r\n                <div className=\"card\">\r\n                    <h3 className=\"card-title\" style={{ marginBottom: 'var(--spacing-lg)' }}>Quick Actions</h3>\r\n\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--spacing-md)' }}>\r\n                        <Link href=\"/admin/users\" className=\"btn btn-secondary\" style={{ justifyContent: 'flex-start' }}>\r\n                            üë• Manage Users\r\n                        </Link>\r\n                        <Link href=\"/admin/payouts\" className=\"btn btn-secondary\" style={{ justifyContent: 'flex-start' }}>\r\n                            üí≥ Process Payouts\r\n                        </Link>\r\n                        <Link href=\"/admin/courses\" className=\"btn btn-secondary\" style={{ justifyContent: 'flex-start' }}>\r\n                            üìö Manage Courses\r\n                        </Link>\r\n                        <Link href=\"/admin/leads\" className=\"btn btn-secondary\" style={{ justifyContent: 'flex-start' }}>\r\n                            üìã View All Leads\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}