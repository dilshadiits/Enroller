{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/EDMAN/src/app/admin/layout.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, ReactNode } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport Link from 'next/link';\r\n\r\ninterface AdminLayoutProps {\r\n    children: ReactNode;\r\n}\r\n\r\ninterface User {\r\n    id: string;\r\n    name: string;\r\n    email: string;\r\n    role: string;\r\n}\r\n\r\nexport default function AdminLayout({ children }: AdminLayoutProps) {\r\n    const router = useRouter();\r\n    const pathname = usePathname();\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const checkAuth = async () => {\r\n            try {\r\n                const res = await fetch('/api/auth/me');\r\n                if (res.ok) {\r\n                    const data = await res.json();\r\n                    if (data.user.role !== 'ADMIN') {\r\n                        router.push('/login');\r\n                        return;\r\n                    }\r\n                    setUser(data.user);\r\n                } else {\r\n                    router.push('/login');\r\n                }\r\n            } catch {\r\n                router.push('/login');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        checkAuth();\r\n    }, []);\r\n\r\n    const handleLogout = async () => {\r\n        await fetch('/api/auth/logout', { method: 'POST' });\r\n        router.push('/login');\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex-center\" style={{ minHeight: '100vh' }}>\r\n                <div className=\"spinner\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const navLinks = [\r\n        { href: '/admin', label: 'Dashboard', icon: 'ðŸ“Š' },\r\n        { href: '/admin/users', label: 'Users', icon: 'ðŸ‘¥' },\r\n        { href: '/admin/leads', label: 'All Leads', icon: 'ðŸ“‹' },\r\n        { href: '/admin/payouts', label: 'Payouts', icon: 'ðŸ’³' },\r\n        { href: '/admin/courses', label: 'Courses', icon: 'ðŸ“š' },\r\n    ];\r\n\r\n    return (\r\n        <div>\r\n            <nav className=\"navbar\">\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n                    <button\r\n                        className=\"mobile-menu-btn\"\r\n                        onClick={() => setSidebarOpen(!sidebarOpen)}\r\n                        aria-label=\"Toggle menu\"\r\n                    >\r\n                        {sidebarOpen ? 'âœ•' : 'â˜°'}\r\n                    </button>\r\n                    <Link href=\"/admin\" className=\"nav-brand\">Enroller</Link>\r\n                </div>\r\n                <div className=\"nav-links\">\r\n                    <span style={{ color: 'var(--text-secondary)' }}>\r\n                        {user?.name}\r\n                    </span>\r\n                    <span className=\"badge badge-contacted\">Admin</span>\r\n                    <button onClick={handleLogout} className=\"btn btn-secondary btn-sm\">\r\n                        Logout\r\n                    </button>\r\n                </div>\r\n                {/* Mobile logout button */}\r\n                <button\r\n                    onClick={handleLogout}\r\n                    className=\"mobile-menu-btn\"\r\n                    style={{ display: 'none' }}\r\n                    aria-label=\"Logout\"\r\n                >\r\n                    ðŸšª\r\n                </button>\r\n            </nav>\r\n\r\n            {/* Mobile sidebar overlay */}\r\n            <div\r\n                className={`sidebar-overlay ${sidebarOpen ? 'active' : ''}`}\r\n                onClick={() => setSidebarOpen(false)}\r\n            />\r\n\r\n            <div className=\"app-layout\">\r\n                <aside className={`sidebar ${sidebarOpen ? 'mobile-open' : ''}`}>\r\n                    {navLinks.map(link => (\r\n                        <Link\r\n                            key={link.href}\r\n                            href={link.href}\r\n                            className={`sidebar-link ${pathname === link.href ? 'active' : ''}`}\r\n                            onClick={() => setSidebarOpen(false)}\r\n                        >\r\n                            <span>{link.icon}</span>\r\n                            <span>{link.label}</span>\r\n                        </Link>\r\n                    ))}\r\n                    {/* Mobile-only user info and logout in sidebar */}\r\n                    <div className=\"mobile-sidebar-footer\" style={{\r\n                        marginTop: 'auto',\r\n                        paddingTop: '2rem',\r\n                        borderTop: '1px solid var(--border-color)',\r\n                        display: 'none'\r\n                    }}>\r\n                        <div style={{\r\n                            padding: '1rem',\r\n                            color: 'var(--text-secondary)',\r\n                            fontSize: '0.875rem'\r\n                        }}>\r\n                            {user?.name}\r\n                        </div>\r\n                        <button\r\n                            onClick={handleLogout}\r\n                            className=\"btn btn-secondary\"\r\n                            style={{ width: '100%' }}\r\n                        >\r\n                            Logout\r\n                        </button>\r\n                    </div>\r\n                </aside>\r\n\r\n                <main className=\"main-content\">\r\n                    {children}\r\n                </main>\r\n            </div>\r\n\r\n            <style jsx>{`\r\n                @media (max-width: 768px) {\r\n                    .mobile-sidebar-footer {\r\n                        display: block !important;\r\n                    }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}